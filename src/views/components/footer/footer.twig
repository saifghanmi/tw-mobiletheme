<footer class="store-footer">
	<div aria-label="footer" class="store-footer__inner">
		<div class="container">
			<!-- Top section with logo and newsletter -->
			<div class="flex flex-col md:flex-row justify-between items-center mb-12 pb-8 border-b border-white/10">
				<div class="mb-6 md:mb-0">
					<a href="{{ link('/') }}" class="flex items-center m-0">
						<h3 class="text-2xl font-light">{{store.name}}<span class="font-bold">.</span></h3>
					</a>
				</div>
				<div class="w-full md:w-1/3">
					<h4 class="text-sm uppercase tracking-wider mb-3 font-light">ابق على تواصل</h4>
					<div class="relative">
						<input type="email" placeholder="البريد الإلكتروني" class="w-full bg-white/5 border border-white/10 rounded-md px-4 py-3 text-sm focus:ring-primary focus:border-primary">
						<button class="absolute left-1 top-1 bottom-1 bg-primary hover:bg-primary-dark transition-colors duration-300 text-white px-5 rounded-md text-sm">اشتراك</button>
					</div>
				</div>
			</div>

			<!-- Main footer content -->
			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
				<!-- About section -->
				<div>
					<h3 class="footer-heading">من نحن</h3>
					{% if store.description %}
						<p class="text-sm text-white/70 mb-6 leading-relaxed">
							{{ store.description|raw }}
						</p>
					{% endif %}
					<div class="flex space-x-4 rtl:space-x-reverse">
						<salla-social class="footer-social"></salla-social>
					</div>
				</div>

				<!-- Links section -->
				<div>
					<h3 class="footer-heading">روابط مهمة</h3>
					<salla-menu source="footer" class="footer-menu"></salla-menu>
				</div>

				<!-- Contact section -->
				<div>
					<h3 class="footer-heading">تواصل معنا</h3>
					<salla-contacts class="footer-contacts"></salla-contacts>
				</div>

				<!-- Apps section -->
				<div>
					<h3 class="footer-heading">تحميل تطبيق الجوال</h3>
					<salla-apps-icons class="footer-apps"></salla-apps-icons>

					<!-- VAT info -->
					{% if store.settings.tax.number %}
						<div class="mt-6 pt-6 border-t border-white/10">
							<div class="flex rtl:space-x-reverse space-x-2 items-center">
								{% if store.settings.tax.certificate %}
									<a class="load-img-onclick" data-modal-id="modal-value-tax" href="#/" alt="{{ store.settings.tax.number }}">
										<img width="100%" height="100%" src="{{ 'images/s-empty.png' | cdn }}" data-src="{{'images/tax.png' | cdn(70,70)}}" class="lazy w-8 rounded-sm hover:opacity-80 transition-opacity" alt="value added tax">
									</a>
								{% endif %}
								<div>
									<p class="text-xs text-white/50 mb-1">{{ trans('common.elements.tax_number') }}</p>
									<b class="text-xs">{{ store.settings.tax.number }}</b>
								</div>
							</div>

							{% if store.settings.tax.certificate %}
								<salla-modal sub-title-first sub-title="{{ trans('common.elements.tax_number') }}" modal-title="{{ store.settings.tax.number }}" id="modal-value-tax">
									<div class="flex justify-center max-w-full">
										<img class="w-full" loading="lazy"
										src="{{ 'images/s-empty.png' | cdn }}"
										data-src="{{ store.settings.tax.certificate }}"
										alt="{{ store.settings.tax.number }}"/>
									</div>
								</salla-modal>
							{% endif %}
						</div>
					{% endif %}
				</div>
			</div>
		</div>
	</div>

	<!-- Partners section -->
	<div class="py-8 bg-dark border-t border-white/5">
		<div class="container">
			<h3 class="footer-heading text-center mb-8">شركاؤنا</h3>

			<!-- Debug info -->
			<div class="text-white text-center mb-4">
				<p>Theme Settings Available: {{ theme.settings is defined ? 'Yes' : 'No' }}</p>
				{% if theme.settings is defined %}
					<p>Footer Partners Defined: {{ theme.settings.footer_partners is defined ? 'Yes' : 'No' }}</p>
					{% if theme.settings.footer_partners is defined %}
						<p>Footer Partners Count: {{ theme.settings.footer_partners|length }}</p>
					{% endif %}
				{% endif %}
			</div>

			<!-- Try with store.theme.settings -->
			{% if store.theme.settings.footer_partners is defined and store.theme.settings.footer_partners|length > 0 %}
				<div class="grid grid-cols-2 md:grid-cols-4 gap-6 items-center justify-center">
					{% for partner in store.theme.settings.footer_partners %}
						<div class="flex justify-center">
							{% if partner['footer_partners.url'] %}
								<a href="{{ partner['footer_partners.url'] }}" target="_blank" class="partner-logo" title="{{ partner['footer_partners.name'] }}">
									<img src="{{ partner['footer_partners.logo'] }}" alt="{{ partner['footer_partners.name'] }}" class="max-h-12 max-w-full transition-opacity hover:opacity-80">
								</a>
							{% else %}
								<div class="partner-logo" title="{{ partner['footer_partners.name'] }}">
									<img src="{{ partner['footer_partners.logo'] }}" alt="{{ partner['footer_partners.name'] }}" class="max-h-12 max-w-full">
								</div>
							{% endif %}
						</div>
					{% endfor %}
				</div>
			{% else %}
				<!-- Fallback to hardcoded demo partners -->
				<div class="grid grid-cols-2 md:grid-cols-4 gap-6 items-center justify-center">
					{% for i in 1..4 %}
						<div class="flex justify-center">
							<div class="partner-logo" title="Partner {{ i }}">
								<img src="{{ 'images/placeholder.png' | cdn }}" alt="Partner {{ i }}" class="max-h-12 max-w-full">
							</div>
						</div>
					{% endfor %}
				</div>
			{% endif %}
		</div>
	</div>

	<!-- Footer bottom -->
	<div class="py-6 bg-darker">
		<div class="container flex flex-col md:flex-row justify-between items-center">
			<span class="text-xs text-white/50 mb-4 md:mb-0 copyright-text">{% hook copyright %}</span>
			<div class="flex items-center">
				<span class="text-xs text-white/50 mr-4">دفع آمن</span>
				<salla-payments class="footer-payments"></salla-payments>
			</div>
		</div>
	</div>

	<span class="hidden bottom-2 rtl:pl-24 ltr:pr-24 md:grid-cols-3 opacity-40"></span>
</footer>
